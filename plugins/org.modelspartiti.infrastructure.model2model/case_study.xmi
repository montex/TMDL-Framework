<?xml version="1.0" encoding="UTF-8"?>
<tmdl:TMDLSpecification
    xmi:version="2.0"
    xmlns:xmi="http://www.omg.org/XMI"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:tmdl="http://www.modelspartiti.org/infrastructure/tmdl"
    xsi:schemaLocation="http://www.modelspartiti.org/infrastructure/tmdl tmdl.ecore">
  <library>
    <templates
        xsi:type="tmdl:TemplateAtomic"
        name="basestation"
        source="&quot;BaseStation.xml&quot;">
      <parameters
          name="bs_services">
        <default
            xsi:type="tmdl:ValueArrayInt"/>
      </parameters>
      <labels>b</labels>
      <interfaces
          xsi:type="tmdl:ModelInterfArray"
          name="interface_bs">
        <variables
            name="ChannelCount"/>
      </interfaces>
    </templates>
    <templates
        xsi:type="tmdl:TemplateAtomic"
        name="user"
        source="&quot;User.xml&quot;">
      <parameters
          name="user_services">
        <default
            xsi:type="tmdl:ValueInt"
            value="1"/>
      </parameters>
      <parameters
          name="p">
        <default
            xsi:type="tmdl:ValueArrayDouble"/>
      </parameters>
      <labels>u</labels>
      <interfaces
          xsi:type="tmdl:ModelInterfArray"
          name="interface_user">
        <variables
            name="ChannelCount"
            parameters="//@library/@templates.1/@parameters.0"/>
      </interfaces>
    </templates>
    <templates
        xsi:type="tmdl:TemplateComposite"
        name="user_bs">
      <parameters
          name="user_bs_services">
        <default
            xsi:type="tmdl:ValueInt"
            value="1"/>
      </parameters>
      <rules
          xsi:type="tmdl:CompositionRuleMatch"
          name="ChannelCount"
          variables="//@library/@templates.0/@interfaces.0/@variables.0 //@library/@templates.1/@interfaces.0/@variables.0">
        <ref
            item="//@library/@templates.1/@interfaces.0"
            block="//@library/@templates.2/@submodules.0"/>
        <ref
            item="//@library/@templates.0/@interfaces.0"
            block="//@library/@templates.2/@submodules.1"/>
      </rules>
      <submodules
          name="block_user"
          ref="user">
        <mult
            xsi:type="tmdl:Parametric"
            ref="//@library/@templates.2/@parameters.0"/>
      </submodules>
      <submodules
          name="block_bs"
          ref="basestation">
        <mult
            xsi:type="tmdl:Parametric"
            ref="//@library/@templates.2/@parameters.0"/>
      </submodules>
    </templates>
  </library>
  <scenario
      name="s1">
    <variants
        name="bs_variant"
        template="basestation">
      <assignments
          ref="//@library/@templates.0/@parameters.0">
        <value
            xsi:type="tmdl:ValueArrayInt">
          <values
              value="1"/>
          <values
              value="2"/>
          <values
              value="3"/>
        </value>
      </assignments>
    </variants>
    <variants
        name="user_variant"
        template="user">
      <assignments
          ref="//@library/@templates.1/@parameters.0">
        <value
            xsi:type="tmdl:ValueArrayInt">
          <values
              value="2"/>
          <values
              value="3"/>
        </value>
      </assignments>
      <assignments
          ref="//@library/@templates.1/@parameters.1">
        <value
            xsi:type="tmdl:ValueArrayDouble">
          <values
              value="0.3"/>
          <values
              value="0.7"/>
        </value>
      </assignments>
    </variants>
    <variants
        name="user_bs_variant"
        template="user_bs">
      <realizations
          ref="user_variant"
          block="//@library/@templates.2/@submodules.0">
        <mult
            xsi:type="tmdl:Parametric"
            ref="//@library/@templates.1/@parameters.0"/>
      </realizations>
      <realizations
          ref="bs_variant"
          block="//@library/@templates.2/@submodules.1">
        <mult
            xsi:type="tmdl:Parametric"
            ref="//@library/@templates.0/@parameters.0"/>
      </realizations>
    </variants>
  </scenario>
</tmdl:TMDLSpecification>
