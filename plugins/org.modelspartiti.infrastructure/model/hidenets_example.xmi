<?xml version="1.0" encoding="UTF-8"?>
<SBATPL:TMDLSpecification
    xmi:version="2.0"
    xmlns:xmi="http://www.omg.org/XMI"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:SBATPL="http://rcl.dsi.unifi.it/modeling/sba-templates.ecore"
    xsi:schemaLocation="http://rcl.dsi.unifi.it/modeling/sba-templates.ecore tmdl.ecore">
  <library>
    <templates
        xsi:type="SBATPL:TemplateAtomic"
        name="usermobility_ambulance"
        source="&quot;UserMobility_Ambulance.xml&quot;">
      <parameters
          name="um_a_numservices">
        <default
            xsi:type="SBATPL:ValueInt"
            value="1"/>
      </parameters>
      <interfaces
          xsi:type="SBATPL:ModelInterfSimple"
          name="AmbulanceArrived"/>
      <interfaces
          xsi:type="SBATPL:ModelInterfSimple"
          name="CheckMove"/>
      <interfaces
          xsi:type="SBATPL:ModelInterfSimple"
          name="PH_AmbulanceLeave"/>
      <interfaces
          xsi:type="SBATPL:ModelInterfSimple"
          name="PH_PostAccident"/>
      <interfaces
          xsi:type="SBATPL:ModelInterfSimple"
          name="ServiceCount"/>
      <interfaces
          xsi:type="SBATPL:ModelInterfSimple"
          name="SignalA"/>
      <interfaces
          xsi:type="SBATPL:ModelInterfSimple"
          name="SignalB"/>
      <interfaces
          xsi:type="SBATPL:ModelInterfSimple"
          name="SignalC"/>
      <interfaces
          xsi:type="SBATPL:ModelInterfSimple"
          name="SignalD"/>
      <interfaces
          xsi:type="SBATPL:ModelInterfSimple"
          name="UpdateSignal"/>
      <interfaces
          xsi:type="SBATPL:ModelInterfSimple"
          name="ZoneC"/>
    </templates>
    <templates
        xsi:type="SBATPL:TemplateAtomic"
        name="user_ambulance"
        source="&quot;User_Ambulance.xml&quot;">
      <interfaces
          xsi:type="SBATPL:ModelInterfSimple"
          name="PH_OnSite"/>
      <interfaces
          xsi:type="SBATPL:ModelInterfSimple"
          name="ReqEmergStreaming"/>
      <interfaces
          xsi:type="SBATPL:ModelInterfSimple"
          name="ReqEmergVideoconference"/>
      <interfaces
          xsi:type="SBATPL:ModelInterfSimple"
          name="Dropped4"/>
      <interfaces
          xsi:type="SBATPL:ModelInterfSimple"
          name="Dropped5"/>
      <interfaces
          xsi:type="SBATPL:ModelInterfSimple"
          name="Failed4"/>
      <interfaces
          xsi:type="SBATPL:ModelInterfSimple"
          name="Failed5"/>
      <interfaces
          xsi:type="SBATPL:ModelInterfSimple"
          name="Idle"/>
      <interfaces
          xsi:type="SBATPL:ModelInterfSimple"
          name="PH_AmbulanceLeave"/>
      <interfaces
          xsi:type="SBATPL:ModelInterfSimple"
          name="PH_OnSite"/>
      <interfaces
          xsi:type="SBATPL:ModelInterfSimple"
          name="PH_PostAccident"/>
      <interfaces
          xsi:type="SBATPL:ModelInterfSimple"
          name="ReqEmergStreaming"/>
      <interfaces
          xsi:type="SBATPL:ModelInterfSimple"
          name="ReqEmergVideoConference"/>
      <interfaces
          xsi:type="SBATPL:ModelInterfSimple"
          name="UpdateSignal"/>
      <interfaces
          xsi:type="SBATPL:ModelInterfSimple"
          name="ZoneC"/>
    </templates>
    <templates
        xsi:type="SBATPL:TemplateComposite"
        name="servicejoin"/>
    <templates
        xsi:type="SBATPL:TemplateComposite"
        name="joinambulance"/>
    <templates
        xsi:type="SBATPL:TemplateComposite"
        name="bsgroup">
      <parameters
          name="numcells">
        <default
            xsi:type="SBATPL:ValueInt"
            value="2"/>
      </parameters>
      <parameters
          name="bsg_numservices">
        <default
            xsi:type="SBATPL:ValueInt"
            value="1"/>
      </parameters>
      <rules
          xsi:type="SBATPL:CompositionRuleAll"
          name="MaxLoad">
        <ref
            item="//@library/@templates.5/@interfaces.1"/>
      </rules>
      <rules
          xsi:type="SBATPL:CompositionRuleForwards"
          name="ChannelCount">
        <ref
            item="//@library/@templates.5/@interfaces.2"/>
      </rules>
      <rules
          xsi:type="SBATPL:CompositionRuleForwards"
          name="ChannelCountSHO">
        <ref
            item="//@library/@templates.5/@interfaces.3"/>
      </rules>
      <rules
          xsi:type="SBATPL:CompositionRuleForwards"
          name="Outage">
        <ref
            item="//@library/@templates.5/@interfaces.4"/>
      </rules>
      <rules
          xsi:type="SBATPL:CompositionRuleForwards"
          name="OutageSHO">
        <ref
            item="//@library/@templates.5/@interfaces.5"/>
      </rules>
      <rules
          xsi:type="SBATPL:CompositionRuleForwards"
          name="LoadFactor">
        <ref
            item="//@library/@templates.5/@interfaces.0"/>
      </rules>
      <bind
          ref="//@library/@templates.5/@parameters.0"
          source="//@library/@templates.4/@parameters.1"/>
      <submodules
          name="b"
          ref="basestation">
        <mult
            xsi:type="SBATPL:Parametric"
            ref="//@library/@templates.4/@parameters.0"/>
      </submodules>
    </templates>
    <templates
        xsi:type="SBATPL:TemplateAtomic"
        name="basestation"
        source="&quot;BaseStation.xml&quot;">
      <parameters
          name="bs_numservices">
        <default
            xsi:type="SBATPL:ValueInt"
            value="1"/>
      </parameters>
      <parameters
          name="load_max_dl">
        <default
            xsi:type="SBATPL:ValueDouble"
            value="0.8"/>
      </parameters>
      <parameters
          name="load_max_ul">
        <default
            xsi:type="SBATPL:ValueDouble"
            value="0.65"/>
      </parameters>
      <labels>b</labels>
      <interfaces
          xsi:type="SBATPL:ModelInterfSimple"
          name="LoadFactor"/>
      <interfaces
          xsi:type="SBATPL:ModelInterfSimple"
          name="MaxLoad"/>
      <interfaces
          xsi:type="SBATPL:ModelInterfArray"
          name="ChannelCount">
        <mult
            xsi:type="SBATPL:Parametric"
            ref="//@library/@templates.5/@parameters.0"/>
        <labels>s</labels>
      </interfaces>
      <interfaces
          xsi:type="SBATPL:ModelInterfArray"
          name="ChannelCountSHO">
        <mult
            xsi:type="SBATPL:Parametric"
            ref="//@library/@templates.5/@parameters.0"/>
        <labels>s</labels>
      </interfaces>
      <interfaces
          xsi:type="SBATPL:ModelInterfArray"
          name="Outage">
        <mult
            xsi:type="SBATPL:Parametric"
            ref="//@library/@templates.5/@parameters.0"/>
        <labels>s</labels>
      </interfaces>
      <interfaces
          xsi:type="SBATPL:ModelInterfArray"
          name="OutageSHO">
        <mult
            xsi:type="SBATPL:Parametric"
            ref="//@library/@templates.5/@parameters.0"/>
        <labels>s</labels>
      </interfaces>
    </templates>
  </library>
  <scenario
      root="basestations"
      name="s1">
    <variants
        name="basestations"
        template="bsgroup">
      <assignments
          ref="//@library/@templates.4/@parameters.0">
        <value
            xsi:type="SBATPL:ValueInt"
            value="4"/>
      </assignments>
      <assignments
          ref="//@library/@templates.4/@parameters.1">
        <value
            xsi:type="SBATPL:ValueInt"
            value="5"/>
      </assignments>
    </variants>
  </scenario>
</SBATPL:TMDLSpecification>
