<?xml version="1.0" encoding="UTF-8"?>
<tmdl:TMDLSpecification
    xmi:version="2.0"
    xmlns:xmi="http://www.omg.org/XMI"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:tmdl="http://www.modelspartiti.org/infrastructure/tmdl"
    xsi:schemaLocation="http://www.modelspartiti.org/infrastructure/tmdl tmdl.ecore">
  <library name="l1">
    <templates
        xsi:type="tmdl:TemplateAtomic"
        name="a1"
        source="location.xmi">
      <parameters
          name="p1">
        <default
            xsi:type="tmdl:ValueInt"/>
      </parameters>
      <parameters
          name="p2">
        <default
            xsi:type="tmdl:ValueInt"/>
      </parameters>
      <interfaces
          xsi:type="tmdl:ModelInterfArray"
          name="i1">
        <variables
            name="sm1"/>
        <variables
            name="sm2"/>
        <mult
            xsi:type="tmdl:Parametric"
            ref="//@library/@templates.0/@parameters.0"/>
        <labels>serv</labels>
      </interfaces>
    </templates>
    <templates
        xsi:type="tmdl:TemplateComposite"
        name="c1">
      <interfaces
          xsi:type="tmdl:ModelInterfSimple"
          name="i2">
        <variables
            name="sm3"/>
        <variables
            name="sm4"/>
      </interfaces>
      <rules
          xsi:type="tmdl:CompositionRuleAll"
          name="r1">
        <ref
            item="//@library/@templates.0/@interfaces.0"
            block="//@library/@templates.1/@submodules.0"/>
      </rules>
      <submodules
          name="b1"
          ref="a1">
        <mult
            xsi:type="tmdl:ValueInt"
            value="3"/>
      </submodules>
    </templates>
  </library>
  <scenario
      root="v2"
      name="s1">
    <variants
        name="v1"
        template="a1">
      <assignments
          ref="//@library/@templates.0/@parameters.0">
        <value
            xsi:type="tmdl:ValueInt"
            value="7"/>
      </assignments>
      <assignments
          ref="//@library/@templates.0/@parameters.1">
        <value
            xsi:type="tmdl:ValueInt"
            value="8"/>
      </assignments>
    </variants>
    <variants
        name="v2"
        template="c1">
      <realizations
          ref="v1"
          block="//@library/@templates.1/@submodules.0"/>
    </variants>
  </scenario>
</tmdl:TMDLSpecification>
